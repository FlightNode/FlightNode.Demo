<h1>Edit Workday Logging</h1>

<alert>
</alert>

<form ng-submit="submit()" name="workdayForm">

    <!-- TODO: need to pull the userid from jwt -->
    <!-- when adding time, try adding next to the Date. Just use smaller columns. -->

    <div class="form-group">
        <div class="row">
            <div class="col-sm-8">
                <label for="workDate">Date</label>
                <div class="input-group">
                    <input type="text" name="workDate" class="form-control" uib-datepicker-popup="{{format}}" ng-model="workday.workDate" is-open="status.opened"
                    datepicker-options="dateOptions" ng-required="true" close-text="Close" placeholder="{{today}}" date />
                    <span class="input-group-btn">
                        <button type="button" class="btn btn-default" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                    </span>
                </div>
                    <p class="clearfix">
                    {{workday.workDate | date:'fullDate' }}
                    </p>
            </div>
            <div role="alert" class="validator col-sm-4">
                <span class="error bg-danger" ng-show="workdayForm.workDate.$error.required">Required</span>
                <span class="error bg-danger" ng-show="workdayForm.workDate.$error.date">Invalid date</span>
            </div>
        </div>
    </div>

      <div class="form-group">
        <div class="row">
            <div class="col-sm-8">
               <label for="workHours">Total Work Time (Hours)</label>
                <input type="text" class="form-control" ng-model="workday.workHours" required
                ng-pattern="/^([01]?[0-9]|2[0-3])(\.[0-9]{1,2})?$/" name="workHours" placeholder="0.00">
                <!-- TODO: this allows saving 0 hours! -->
            </div>
            <div role="alert" class="validator col-sm-4">
                <span class="error bg-danger" ng-show="workdayForm.workHours.$error.required">Hours required</span>
                <span class="error bg-danger" ng-show="workdayForm.workHours.$error.pattern">Invalid hours</span>
          </div>
        </div>
      </div>

      <div class="form-group">
        <div class="row">
            <div class="col-sm-8">
               <label for="travelHours">Total Travel Time (Hours)</label>
                <input type="text" class="form-control" ng-model="workday.travelHours" required
                ng-pattern="/^([01]?[0-9]|2[0-3])(\.[0-9]{1,2})?$/" name="travelHours" placeholder="0.00">
                <!-- TODO: this allows saving 0 hours! -->
            </div>
            <div role="alert" class="validator col-sm-4">
                <span class="error bg-danger" ng-show="workdayForm.travelHours.$error.required">Hours required</span>
                <span class="error bg-danger" ng-show="workdayForm.travelHours.$error.pattern">Invalid hours</span>
          </div>
        </div>
      </div>

    <div class="form-group">
        <div class="row">
            <div class="col-sm-8">
                <label for="location">Location</label>
                <select name="location" class="form-control" ng-model="workday.location" required>
                    <option ng-repeat="option in data.locations"
                       ng-selected="{{option.id == workday.location}}"
                       value="{{option.id}}">
                        {{option.value}}
                    </option>
                </select>
            </div>
            <div role="alert" class="validator col-sm-4">
                <span class="error bg-danger" ng-show="workdayForm.location.$error.required">Required</span>
            </div>
        </div>
    </div>

    <div class="form-group">
        <div class="row">
            <div class="col-sm-8">
                <label for="workType">Work Type</label>
                <select name="workType" class="form-control" ng-model="workday.workType" required>
                    <option ng-repeat="option in data.worktypes"
                       ng-selected="{{option.id == workday.workType}}"
                       value="{{option.id}}">
                        {{option.value}}
                    </option>
                </select>
            </div>
            <div role="alert" class="validator col-sm-4">
                <span class="error bg-danger" ng-show="workdayForm.workType .$error.required">Required</span>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-8 text-right">
            <input type="hidden" name="id" ng-model="workday.id"></input>
            <button type="submit" class="btn btn-primary">Save</button>
            <button type="button" class="btn btn-secondary" ng-click="cancel()">Cancel</button>
        </div>
    </div>
</form>



<loading></loading>